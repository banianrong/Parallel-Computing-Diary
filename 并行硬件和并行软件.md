# **并行硬件和并行软件**

注:该部分目前只包括《并行程序涉及导论》的2.1，2.2.1，2.3.1，2.3.3

## **冯诺依曼结构**
- 冯诺依曼结构包括主存、中央处理单元(CPU)处理器或核，以及主存和CPU之间的互连结构

- ### **主存**
> 主存中有许多区域，每个区域都可以存储指令和数据。每个区域都有一个地址，可以通过这个地址来访问相应的区域及区域中存储的数据和指令。

- ### **中央处理单元(Central Processing Unit)**
> 中央处理单元分为控制单元和算数逻辑单元(Arithmetic Logic Unit, ALU)。控制单元负责决定该执行程序中的哪些指令，而ALU负责执行指令。CPU中的数据和程序执行时的状态信息存储在特殊的快速存储介质中，即寄存器，叫做程序计数器，用来存放下一条指令的地址。

- ### **互连结构**
> 指令和数据通过CPU和主存之间的互连结构进行传输。这种互连结构通常是总线，总线中包括一组并行的线以及控制这些线的硬件。

#### 冯诺依曼结构(表格形式)

| | 冯诺依曼结构 | |
|-|:-----------:|-|
|主存|中央处理单元|互连结构|

> 注:数据或指令从主存传送到CPU时，我们称数据或指令从内存中**取出**或者**读出**。当数据或指令从CPU传送到主存中时，我们称数据或指令**写入**或者**存入**内存中。

冯诺依曼中因为主存和CPU分离，他们之间通过互连结构连接，因此主存和FCPU之间的数据指令的传输交互会受限于会按结构的访问速率。这称之为**冯诺依曼瓶颈**。

## **进程、多任务及线程**

- ### **操作系统(Operating System, OS)**
> 一种用来管理计算机的软件和硬件资源的主要软件

OS更像对于资源调配的管家

- 程序的运行对于操作系统来说是建立一个进程，进程是运行的程序的实例

| 进程的组成部分 |
|:----------|
|可执行的机器语言程序|
|一块内存空间，包括可执行代码，一个用来跟踪执行函数的调用栈、一个堆，以及一些其他内存区域|
|操作系统分配给进程的资源描述符，如文件描述符|
|安全信息，例如阐述进程能够访问哪些硬件和软件的信息|
|进程状态信息，例如进程是否就绪还是等待某些资源、寄存器内容，以及关于进程存储空间的信息|

注:有点类似面向对象中的对象(基类)，进程也是类似一种对象，他的实例就代表一个程序的运行

单核系统实现多任务通过每个进程运行几毫秒(时间片)就切换，因此看起来一段时间内单核系统也能运行多个任务

> 一个多任务操作系统能够在1分钟内多次切换运行的程序，即使切换进程花费相对较长的事件。

- ### **线程&进程**
进程需要一定的资源，如果不同的进程在同一时间段需要相同的资源时候，后一个进程就会发生阻塞，即该进程会停止运行。
这时候线程的概念提出，虽然有时候进程所需要的某些资源被占用，但是其仍然能够运行。
> 线程为程序员提供了一种机制，将程序划分为多个大致独立的任务，当某个任务阻塞时能执行其他任务。此外，在大多数系统中，线程间的切换比进程间的切换更快。因为线程相对于进程而言是“轻量级”的。线程包含在进程中，所以线程可以使用相同的可执行代码，共享相同的内存和相同的I/O设备。实际上，当两个线程共属于一个进程时，它们共享进程的大多数资源。他们之间最大的差别是各自需要一个私有的程序计数器和函数调用栈，使他们能够独立运行。

对于操作系统来说，多任务并行中的程序是进程，进程中类似的对象是线程
因此我们也可以将进程看作一个“主线程”，它能够控制其他线程的开始和结束

> 当一个线程开始时，他从进程中 **派生(fork)** 出来；当一个线程结束，它 **合并(join)** 到进程中。
